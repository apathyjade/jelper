"use strict";(globalThis.webpackChunk_jelper_website=globalThis.webpackChunk_jelper_website||[]).push([[6041],{71140(e,t,n){n.r(t),n.d(t,{assets:()=>T,contentTitle:()=>b,default:()=>g,frontMatter:()=>x,metadata:()=>i,toc:()=>k});const i=JSON.parse('{"id":"notify/index","title":"notify","description":"\u901a\u77e5\u5668, \u89e3\u51b3\u8de8\u6a21\u5757\u4f9d\u8d56\u95ee\u9898","source":"@site/docs/notify/index.mdx","sourceDirName":"notify","slug":"/notify/","permalink":"/jelper/docs/notify/","draft":false,"unlisted":false,"editUrl":"https://github.com/apathyjade/jelper/tree/master/packages/docs/notify/index.mdx","tags":[],"version":"current","frontMatter":{"title":"notify","order":1},"sidebar":"tutorialSidebar","previous":{"title":"useValue","permalink":"/jelper/docs/hooks/useValue/"},"next":{"title":"promise","permalink":"/jelper/docs/promise/"}}');var o=n(71137),s=n(99868),r=n(56374),d=n(82437),c=n(15201);const l=()=>{let e=new Set;return{notify:t=>{e.forEach(e=>e(t))},on:t=>(e.add(t),()=>e.delete(t)),once:t=>{const n=i=>{t(i),e.delete(n)};return e.add(n),()=>e.delete(n)},destroy:()=>{e.clear()}}},a=l(),f=()=>{const[e,t]=(0,d.useState)(0);return(0,d.useEffect)(()=>a.on(t),[]),(0,o.jsxs)("div",{children:[(0,o.jsx)(c.Ay,{onClick:()=>a.notify(e+1),children:"\u7d2f\u52a0"})," => \u6570\u5b57\uff1a",e]})},u=()=>(0,o.jsx)(f,{});let h=()=>{let e=l();if("undefined"==typeof window||"function"!=typeof window.matchMedia)return e;let t=window.matchMedia("(prefers-color-scheme: dark)");const n=t=>{e.notify(t.matches?"dark":"light")};return t.addEventListener?t.addEventListener("change",n):t.addListener(n),Object.assign(Object.assign({},e),{destroy:()=>{e.destroy(),t.removeEventListener?t.removeEventListener("change",n):t.removeListener(n),t=null}})},m=h(),y=h();const p=()=>{const[e,t]=(0,d.useState)(),[n,i]=(0,d.useState)();return(0,d.useEffect)(()=>{m.on(t)},[]),(0,d.useEffect)(()=>{y.on(i)},[]),(0,o.jsxs)("div",{children:["\u4e3b\u9898\uff1a",e," === ",n]})},j=()=>(0,o.jsx)(p,{});var v=n(44310);const x={title:"notify",order:1},b=void 0,T={},k=[{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:3},{value:"\u6837\u4f8b",id:"\u6837\u4f8b",level:3},{value:"notify \u4f7f\u7528",id:"notify-\u4f7f\u7528",level:4},{value:"themeNotify \u4f7f\u7528",id:"themenotify-\u4f7f\u7528",level:4},{value:"type",id:"type",level:3}];function N(e){const t={code:"code",h3:"h3",h4:"h4",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.p,{children:"\u901a\u77e5\u5668, \u89e3\u51b3\u8de8\u6a21\u5757\u4f9d\u8d56\u95ee\u9898"}),"\n","\n",(0,o.jsx)(t.h3,{id:"\u5b89\u88c5",children:"\u5b89\u88c5"}),"\n",(0,o.jsx)(v.A,{name:"@jelper/notify"}),"\n",(0,o.jsx)(t.h3,{id:"\u6837\u4f8b",children:"\u6837\u4f8b"}),"\n",(0,o.jsx)(t.h4,{id:"notify-\u4f7f\u7528",children:"notify \u4f7f\u7528"}),"\n",(0,o.jsx)(r.A,{title:"\u901a\u7528notify",desc:"",text:"import React, { useState, useEffect } from 'react';\nimport { Button } from 'antd';\nimport { buildNotify } from '@jelper/notify';\n\nconst clickNotify = buildNotify<number>();\n\nconst TestCom = () => {\n\n  const [cnt, setCnt] = useState(0);\n\n  useEffect(() => {\n    return clickNotify.on(setCnt);\n  }, []);\n\n  return (\n    <div>\n      <Button onClick={() => clickNotify.notify(cnt + 1)} >\u7d2f\u52a0</Button> => \u6570\u5b57\uff1a{cnt}\n    </div>\n  );\n};\n\nexport default () => {\n  return (<TestCom />)\n};\n\n\n",children:(0,o.jsx)(u,{})}),"\n",(0,o.jsx)(t.h4,{id:"themenotify-\u4f7f\u7528",children:"themeNotify \u4f7f\u7528"}),"\n",(0,o.jsx)(r.A,{title:"\u7cfb\u7edf\u4e3b\u9898notify",desc:"",text:"import React, { useState, useEffect } from 'react';\nimport { buildThemeNotify } from '@jelper/notify';\n\nlet themeNotify = buildThemeNotify();\nlet themeNotify2 = buildThemeNotify();\n\nconst TestCom = () => {\n\n  const [theme, setTheme] = useState();\n\n  const [theme2, setTheme2] = useState();\n\n  useEffect(() => {\n    themeNotify.on(setTheme);\n    \n  }, []);\n  useEffect(() => {\n    themeNotify2.on(setTheme2);\n  }, []);\n\n  return (\n    <div>\u4e3b\u9898\uff1a{theme} === {theme2}</div>\n  );\n};\n\nexport default () => {\n  return (<TestCom />)\n};\n\n\n",children:(0,o.jsx)(j,{})}),"\n",(0,o.jsx)(t.h3,{id:"type",children:"type"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-typescript",children:"type MoudleType = <T = void>() => {\n    notify: (data: T) => void;\n    on: (callback: (data: T) => void) => Unsubscribe;\n    once: (callback: (data: T) => void) => Unsubscribe;\n    destroy: () => void;\n};\n"})})]})}function g(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(N,{...e})}):N(e)}}}]);