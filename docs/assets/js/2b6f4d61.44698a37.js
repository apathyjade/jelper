"use strict";(self.webpackChunk_jelper_website=self.webpackChunk_jelper_website||[]).push([[5136],{881:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>g,contentTitle:()=>f,default:()=>y,frontMatter:()=>m,metadata:()=>i,toc:()=>x});const i=JSON.parse('{"id":"handler/index","title":"handler","description":"\u63d0\u4f9b\u57fa\u7840\u4e8b\u4ef6\u7ed1\u5b9a\uff0c\u89e3\u51b3\u7279\u6b8a\u573a\u666f\u4e0b\u7684\u901a\u4fe1","source":"@site/docs/handler/index.mdx","sourceDirName":"handler","slug":"/handler/","permalink":"/jelper/docs/handler/","draft":false,"unlisted":false,"editUrl":"https://github.com/apathyjade/jelper/tree/master/packages/docs/handler/index.mdx","tags":[],"version":"current","frontMatter":{"title":"handler"},"sidebar":"tutorialSidebar","previous":{"title":"enum","permalink":"/jelper/docs/enum/"},"next":{"title":"hooks","permalink":"/jelper/docs/hooks/"}}');var a=l(3274),r=l(4252),t=l(6220),s=l(6016),o=l(9721),d=(l(9474),function(e,n,l,i){return new(l||(l=Promise))((function(a,r){function t(e){try{o(i.next(e))}catch(n){r(n)}}function s(e){try{o(i.throw(e))}catch(n){r(n)}}function o(e){var n;e.done?a(e.value):(n=e.value,n instanceof l?n:new l((function(e){e(n)}))).then(t,s)}o((i=i.apply(e,n||[])).next())}))});class c{constructor(){this.value=[]}get size(){return this.value.length}on(e){this.value=[...this.value,e]}off(e){this.value=e?this.value.filter((n=>n!==e)):[]}call(e){const n=this.value;return Promise.all(n.map((n=>d(this,void 0,void 0,(function*(){return yield n(e)})))))}callWithRace(e){const n=this.value;return Promise.race(n.map((n=>d(this,void 0,void 0,(function*(){return yield n(e)})))))}}c.build=()=>new u;class u{constructor(){this.value=null}on(e){if(this.value&&console.warn("handler is already exist"),"function"!=typeof e)throw new Error("handler must be function");this.value=e}off(){this.value=null}call(e){return this.value?Promise.resolve(this.value(e)):Promise.reject(new Error("handler is not exist"))}}u.build=()=>new c;const h=u.build();h.on((()=>{console.log("\u4e0d\u6267\u884c")})),h.on((e=>{console.log(e)})),h.call("single").then((()=>{})),h.off();const p=c.build();p.on((()=>{console.log("\u540c\u6b65")})),p.on((async e=>{console.log("\u5f02\u6b65",e)})),p.call("multiple").then((()=>{console.log("end")}));const v=()=>(0,a.jsx)(a.Fragment,{}),m={title:"handler"},f=void 0,g={},x=[{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:3},{value:"\u6837\u4f8b",id:"\u6837\u4f8b",level:3},{value:"Api",id:"api",level:2},{value:"SingleHandler",id:"singlehandler",level:3},{value:"\u5b9e\u4f8b\u65b9\u6cd5",id:"\u5b9e\u4f8b\u65b9\u6cd5",level:4},{value:"\u9759\u6001\u65b9\u6cd5",id:"\u9759\u6001\u65b9\u6cd5",level:4},{value:"MultipleHandler",id:"multiplehandler",level:3},{value:"\u5b9e\u4f8b\u65b9\u6cd5",id:"\u5b9e\u4f8b\u65b9\u6cd5-1",level:4},{value:"\u9759\u6001\u65b9\u6cd5",id:"\u9759\u6001\u65b9\u6cd5-1",level:4}];function j(e){const n={h2:"h2",h3:"h3",h4:"h4",p:"p",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"\u63d0\u4f9b\u57fa\u7840\u4e8b\u4ef6\u7ed1\u5b9a\uff0c\u89e3\u51b3\u7279\u6b8a\u573a\u666f\u4e0b\u7684\u901a\u4fe1"}),"\n","\n",(0,a.jsx)(n.h3,{id:"\u5b89\u88c5",children:"\u5b89\u88c5"}),"\n",(0,a.jsx)(s.A,{name:"@jelper/handler"}),"\n",(0,a.jsx)(n.h3,{id:"\u6837\u4f8b",children:"\u6837\u4f8b"}),"\n","\n",(0,a.jsx)(t.A,{title:"\u57fa\u7840\u7528\u6cd5",desc:"",text:"\nimport React from 'react';\nimport { MultipleHandler, SingleHandler } from '@jelper/handler';\n\nconst single = SingleHandler.build(); // new SingleHandler();\nsingle.on(() => {\n  console.log('\u4e0d\u6267\u884c');\n});\nsingle.on((data) => {\n  console.log(data)\n});\nsingle.call('single').then(() => {\n\n}); // single\nsingle.off();\n\nconst multiple = MultipleHandler.build();\nmultiple.on(() => {\n  console.log('\u540c\u6b65');\n});\nmultiple.on(async (data) => {\n  console.log('\u5f02\u6b65', data);\n});\nmultiple.call('multiple').then(() => {\n  console.log('end');\n});// \u6216\u8005\u4f7f\u7528\u7ee7\u627f\n\nexport default () => (<>\n</>);\n",children:(0,a.jsx)(v,{})}),"\n",(0,a.jsx)(n.h2,{id:"api",children:"Api"}),"\n",(0,a.jsx)(n.p,{children:"\u901a\u4fe1\u8c03\u7528\u5de5\u5177\uff0c SingleHandler\u3001MultipleHandler\u4e3a\u4e86\u65b9\u4fbf\u62d3\u5c55\uff0c\u63a8\u8350\u4f7f\u7528 SingleHandler.build\u3001MultipleHandler.build"}),"\n",(0,a.jsx)(n.h3,{id:"singlehandler",children:"SingleHandler"}),"\n",(0,a.jsx)(n.h4,{id:"\u5b9e\u4f8b\u65b9\u6cd5",children:"\u5b9e\u4f8b\u65b9\u6cd5"}),"\n",(0,a.jsx)(o.A,{dataSource:[{param:"on",desc:"\u7ed1\u5b9a\u65b9\u6cd5",type:"() => void",defValue:"--",version:""},{param:"off",desc:"\u89e3\u7ed1\u65b9\u6cd5",type:"() => void",defValue:"--",version:""},{param:"call",desc:"\u8c03\u7528\u7ed1\u5b9a\u56de\u8c03",type:"() => Promise",defValue:"--",version:""}]}),"\n",(0,a.jsx)(n.h4,{id:"\u9759\u6001\u65b9\u6cd5",children:"\u9759\u6001\u65b9\u6cd5"}),"\n",(0,a.jsx)(o.A,{dataSource:[{param:"build",desc:"\u6784\u5efa\u5b9e\u4f8b",type:"() => SingleHandler",defValue:"--",version:""}]}),"\n",(0,a.jsx)(n.h3,{id:"multiplehandler",children:"MultipleHandler"}),"\n",(0,a.jsx)(n.h4,{id:"\u5b9e\u4f8b\u65b9\u6cd5-1",children:"\u5b9e\u4f8b\u65b9\u6cd5"}),"\n",(0,a.jsx)(o.A,{dataSource:[{param:"size",desc:"\u7ed1\u5b9a\u65b9\u6cd5\u6570\u91cf",type:"number",defValue:"--",version:""},{param:"on",desc:"\u7ed1\u5b9a\u65b9\u6cd5",type:"() => void",defValue:"--",version:""},{param:"off",desc:"\u89e3\u7ed1\u65b9\u6cd5",type:"() => void",defValue:"--",version:""},{param:"call",desc:"Promise.race \u8c03\u7528",type:"() => Promise",defValue:"--",version:""},{param:"callWithRace",desc:"Promise.race \u8c03\u7528",type:"() => Promise",defValue:"--",version:""}]}),"\n",(0,a.jsx)(n.h4,{id:"\u9759\u6001\u65b9\u6cd5-1",children:"\u9759\u6001\u65b9\u6cd5"}),"\n",(0,a.jsx)(o.A,{dataSource:[{param:"build",desc:"\u6784\u5efa\u5b9e\u4f8b",type:"() => SingleHandler",defValue:"--",version:""}]})]})}function y(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(j,{...e})}):j(e)}}}]);