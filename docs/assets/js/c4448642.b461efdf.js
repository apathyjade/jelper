"use strict";(self.webpackChunk_jelper_website=self.webpackChunk_jelper_website||[]).push([[4422],{8074:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>G,contentTitle:()=>P,default:()=>F,frontMatter:()=>k,metadata:()=>s,toc:()=>E});const s=JSON.parse('{"id":"context-composer/index","title":"context-composer","description":"\u5b89\u88c5","source":"@site/docs/context-composer/index.mdx","sourceDirName":"context-composer","slug":"/context-composer/","permalink":"/jelper/docs/context-composer/","draft":false,"unlisted":false,"editUrl":"https://github.com/apathyjade/jelper/tree/master/packages/docs/context-composer/index.mdx","tags":[],"version":"current","frontMatter":{"title":"context-composer","order":1},"sidebar":"tutorialSidebar","previous":{"title":"Row\u7ec4\u4ef6","permalink":"/jelper/docs/component/row/"},"next":{"title":"\u57fa\u7840\u6837\u5f0f\u7247\u6bb5","permalink":"/jelper/docs/css/"}}');var t=n(3274),r=n(4252),l=n(4327),a=n(9474),c=n(1722);const p=e=>{const o=a.createContext({});return{forwardComposer:n=>s=>{const t=e(s);return a.createElement(o.Provider,{value:t},(0,a.useMemo)((()=>a.createElement(n,Object.assign({},s))),[s]))},useComposerCtx:()=>a.useContext(o)}},i=p,{forwardComposer:m,useComposerCtx:d}=i((e=>{const[o,n]=(0,a.useState)("light");return{glabalType:o,setGlabalType:n}})),u=()=>{const{glabalType:e,setGlabalType:o}=d();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:["glabalType: ",e]}),(0,t.jsx)(c.A,{value:e,onChange:e=>o(e.target.value)})]})},x=m((()=>(0,t.jsx)(u,{}))),{forwardComposer:C,useComposerCtx:g}=p((e=>{const[o,n]=(0,a.useState)("light");return{glabalType:o,setGlabalType:n}})),{forwardComposer:h,useComposerCtx:T}=p((e=>{const[o,n]=(0,a.useState)("light1");return{glabalType1:o,setGlabalType1:n}})),f=(j=[h,C],e=>j.reduce(((e,o)=>n=>{const s=o(e);return a.createElement(s,Object.assign({},n))}),e));var j;const b=()=>{const{glabalType:e,setGlabalType:o}=g();return(0,a.useEffect)((()=>{console.log("TestCom----\x3e useEffect")}),[]),console.log("TestCom"),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:["glabalType: ",e]}),(0,t.jsx)(c.A,{value:e,onChange:e=>o(e.target.value)}),(0,t.jsx)("br",{})]})},v=()=>{const{glabalType1:e,setGlabalType1:o}=T();return(0,a.useEffect)((()=>{console.log("TestCom1----\x3e useEffect")}),[]),console.log("TestCom1"),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:["glabalType1: ",e]}),(0,t.jsx)(c.A,{value:e,onChange:e=>o(e.target.value)}),(0,t.jsx)("br",{})]})},y=f((()=>((0,a.useEffect)((()=>{console.log("forwardComposer----\x3e useEffect")}),[]),console.log("forwardComposer"),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b,{}),(0,t.jsx)(v,{})]}))));var w=n(2962);const k={title:"context-composer",order:1},P=void 0,G={},E=[{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:3},{value:"\u6837\u4f8b",id:"\u6837\u4f8b",level:3},{value:"\u5168\u5c40context\u4f7f\u7528",id:"\u5168\u5c40context\u4f7f\u7528",level:4},{value:"\u591acontext\u5408\u5e76\u4f7f\u7528",id:"\u591acontext\u5408\u5e76\u4f7f\u7528",level:4},{value:"API",id:"api",level:3},{value:"createCtxComposer&lt;Props, T&gt;",id:"createctxcomposerprops-t",level:4},{value:"\u53c2\u6570",id:"\u53c2\u6570",level:5},{value:"\u8fd4\u56de\u503c",id:"\u8fd4\u56de\u503c",level:5},{value:"mergeComposer",id:"mergecomposer",level:4},{value:"\u53c2\u6570",id:"\u53c2\u6570-1",level:5},{value:"\u8fd4\u56de\u503c",id:"\u8fd4\u56de\u503c-1",level:5}];function H(e){const o={h3:"h3",h4:"h4",h5:"h5",li:"li",p:"p",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.h3,{id:"\u5b89\u88c5",children:"\u5b89\u88c5"}),"\n",(0,t.jsx)(w.A,{name:"@jelper/context-composer"}),"\n",(0,t.jsx)(o.h3,{id:"\u6837\u4f8b",children:"\u6837\u4f8b"}),"\n",(0,t.jsx)(o.h4,{id:"\u5168\u5c40context\u4f7f\u7528",children:"\u5168\u5c40context\u4f7f\u7528"}),"\n",(0,t.jsx)(l.A,{title:"",desc:"",text:"import React, { useState } from 'react';\nimport { Input } from 'antd';\nimport createCtxComposer from '@jelper/context-composer';\n\n\ninterface HooksParams {\n\n}\ninterface HooksValue {\n  glabalType: string;\n  setGlabalType: (val: string) => void;\n}\nconst { forwardComposer, useComposerCtx } = createCtxComposer<HooksParams, HooksValue>((props: HooksParams) => {\n  const [glabalType, setGlabalType] = useState('light')\n  return {\n    glabalType,\n    setGlabalType,\n  }\n});\n\nconst TestCom = () => {\n  const {glabalType, setGlabalType} = useComposerCtx();\n  return (\n    <>\n      <div>glabalType: {glabalType}</div>\n      <Input value={glabalType} onChange={(ev) => setGlabalType(ev.target.value)} />\n    </>\n  );\n};\n\nexport default forwardComposer(() => {\n  return (<TestCom />)\n});\n\n\n",children:(0,t.jsx)(x,{})}),"\n",(0,t.jsx)(o.h4,{id:"\u591acontext\u5408\u5e76\u4f7f\u7528",children:"\u591acontext\u5408\u5e76\u4f7f\u7528"}),"\n",(0,t.jsx)(l.A,{title:"",desc:"",text:"import React, { useEffect, useState } from 'react';\nimport { Input } from 'antd';\nimport  {createCtxComposer, mergeComposer} from '@jelper/context-composer';\n\n\ninterface HooksParams {\n\n}\ninterface HooksValue {\n  glabalType: string;\n  setGlabalType: (val: string) => void;\n}\nconst { forwardComposer, useComposerCtx } = createCtxComposer<HooksParams, HooksValue>((props: HooksParams) => {\n  const [glabalType, setGlabalType] = useState('light')\n  return {\n    glabalType,\n    setGlabalType,\n  };\n});\n\nconst { forwardComposer: forwardComposer1, useComposerCtx: useComposerCtx1 } = createCtxComposer<HooksParams, HooksValue>((props: HooksParams) => {\n  const [glabalType1, setGlabalType1] = useState('light1')\n  return {\n    glabalType1,\n    setGlabalType1,\n  };\n});\n\nconst mergeforwardComposer = mergeComposer([\n  forwardComposer1,\n  forwardComposer,\n])\n\nconst TestCom = () => {\n  const {glabalType, setGlabalType} = useComposerCtx();\n  useEffect(() => {\n    console.log('TestCom----\x3e useEffect' )\n  }, []);\n  console.log('TestCom')\n  return (\n    <>\n      <div>glabalType: {glabalType}</div>\n      <Input value={glabalType} onChange={(ev) => setGlabalType(ev.target.value)} />\n      <br />\n    </>\n  );\n};\nconst TestCom1 = () => {\n  const {glabalType1, setGlabalType1} = useComposerCtx1();\n  useEffect(() => {\n    console.log('TestCom1----\x3e useEffect' )\n  }, []);\n  console.log('TestCom1')\n  return (\n    <>\n      <div>glabalType1: {glabalType1}</div>\n      <Input value={glabalType1} onChange={(ev) => setGlabalType1(ev.target.value)} />\n      <br />\n    </>\n  );\n};\n\nexport default mergeforwardComposer(() => {\n  useEffect(() => {\n    console.log('forwardComposer----\x3e useEffect' )\n  }, []);\n  console.log('forwardComposer');\n  return (<><TestCom /><TestCom1 /></>)\n});\n\n\n",children:(0,t.jsx)(y,{})}),"\n",(0,t.jsx)(o.h3,{id:"api",children:"API"}),"\n",(0,t.jsx)(o.h4,{id:"createctxcomposerprops-t",children:"createCtxComposer<Props, T>"}),"\n",(0,t.jsxs)(o.p,{children:["\u521b\u5efaReact.createContext, \u65b9\u4fbf ",(0,t.jsx)("em",{children:"Provider"})," \u5f15\u5165\u548c ",(0,t.jsx)("em",{children:"useContext"})," \u4f7f\u7528"]}),"\n",(0,t.jsx)(o.h5,{id:"\u53c2\u6570",children:"\u53c2\u6570"}),"\n",(0,t.jsxs)(o.ul,{children:["\n",(0,t.jsx)(o.li,{children:"useCfgHook: (props: Props) => T"}),"\n"]}),"\n",(0,t.jsx)(o.h5,{id:"\u8fd4\u56de\u503c",children:"\u8fd4\u56de\u503c"}),"\n",(0,t.jsxs)(o.ul,{children:["\n",(0,t.jsxs)(o.li,{children:["\n",(0,t.jsx)(o.p,{children:"result<Object>"}),"\n",(0,t.jsxs)(o.ul,{children:["\n",(0,t.jsxs)(o.li,{children:["\n",(0,t.jsx)(o.p,{children:"forwardComposer: (Com: FC<Props>) => FC<Props>"}),"\n"]}),"\n",(0,t.jsxs)(o.li,{children:["\n",(0,t.jsx)(o.p,{children:"useComposerCtx: T"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(o.h4,{id:"mergecomposer",children:"mergeComposer"}),"\n",(0,t.jsx)(o.h5,{id:"\u53c2\u6570-1",children:"\u53c2\u6570"}),"\n",(0,t.jsxs)(o.ul,{children:["\n",(0,t.jsx)(o.li,{children:"list: Array<(Com: FC<Props>) => FC<Props>>"}),"\n"]}),"\n",(0,t.jsx)(o.h5,{id:"\u8fd4\u56de\u503c-1",children:"\u8fd4\u56de\u503c"}),"\n",(0,t.jsxs)(o.ul,{children:["\n",(0,t.jsx)(o.li,{children:"result: (Com: FC<Props>) => FC<Props>"}),"\n"]})]})}function F(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,t.jsx)(o,{...e,children:(0,t.jsx)(H,{...e})}):H(e)}}}]);