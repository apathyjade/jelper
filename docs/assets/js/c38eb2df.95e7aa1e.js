"use strict";(self.webpackChunk_jelper_website=self.webpackChunk_jelper_website||[]).push([[986],{4975:(e,s,t)=>{t.d(s,{A:()=>l});t(9474);var n=t(8700),r=t(3274);const d=[{title:"\u53c2\u6570",width:120,dataIndex:"param"},{title:"\u8bf4\u660e",width:240,dataIndex:"desc"},{title:"\u7c7b\u578b",width:120,dataIndex:"type"},{title:"\u9ed8\u8ba4\u503c",width:120,dataIndex:"defValue"},{title:"\u7248\u672c",width:80,dataIndex:"version"}],l=e=>(0,r.jsx)(n.A,{rowKey:"param",columns:d,bordered:!0,size:"small",pagination:!1,...e})},5405:(e,s,t)=>{t.r(s),t.d(s,{Demo:()=>f,Example:()=>p,assets:()=>m,contentTitle:()=>v,default:()=>y,frontMatter:()=>b,metadata:()=>n,toc:()=>k});const n=JSON.parse('{"id":"hooks/index","title":"hooks","description":"React Hooks \u5e93\uff0c\u5305\u542breact\u57fa\u7840hooks\u7684\u62d3\u5c55\uff0c\u751f\u547d\u5468\u671f\u7684\u6a21\u62df\uff0c\u6d4f\u89c8\u5668api\u7684\u5c01\u88c5\u7b49\u80fd\u529b\uff1b","source":"@site/docs/hooks/index.mdx","sourceDirName":"hooks","slug":"/hooks/","permalink":"/jelper/docs/hooks/","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/hooks/index.mdx","tags":[],"version":"current","frontMatter":{"title":"hooks","sort":1},"sidebar":"tutorialSidebar","previous":{"title":"handler","permalink":"/jelper/docs/handler/"},"next":{"title":"promise","permalink":"/jelper/docs/promise/"}}');var r=t(3274),d=t(4252),l=(t(4327),t(2962)),i=(t(4975),t(9474));const h=e=>{const s=(0,i.useRef)(e);return s.current=e,s},c=(e,s=[])=>{const t=h(e);return(0,i.useCallback)(((...e)=>t.current(...e)),s)},a=()=>{const e=(0,i.useRef)(!1);return(0,i.useEffect)((()=>()=>{e.current=!0}),[]),(0,i.useCallback)((()=>e.current),[])},o=e=>{(0,i.useState)(e)},u=e=>{const s=h(e);(0,i.useEffect)((()=>()=>{s.current()}),[])},x={immediate:!1,catchParam:!1},j=(e,s=x)=>{const[t,n]=(0,i.useState)(),[r,d]=(0,i.useState)(s.defParam||{}),[l,h]=(0,i.useState)(!1),[j,b]=(0,i.useState)(),[v,m]=(0,i.useState)(),p=a();(0,i.useEffect)((()=>{if(!v||!s.onAbort)return;const e=s.onAbort;return v.signal.addEventListener("abort",e),()=>{v.signal.removeEventListener("abort",e)}}),[v]);const f=c((t=>{const l=s.catchParam?Object.assign(Object.assign({},r),t||{}):t;h(!0),b(void 0),v&&v.abort();const i=new AbortController;return m(i),e(l,{signal:i.signal}).then((e=>{p()||i.signal.aborted||(n(s.format?s.format(e):e),d(l),h(!1))}),(e=>{if(p()||i.signal.aborted)return Promise.reject(e);b(e),h(!1)})).finally((()=>{p()||m(void 0)}))})),k=c((()=>f(r)));return o((()=>{s.immediate&&f(r)})),u((()=>{v&&v.abort()})),[t,{run:f,refresh:k,loading:l,error:j,param:r}]};const b={title:"hooks",sort:1},v=void 0,m={},p=()=>{const[e]=j((e=>new Promise((e=>{setTimeout((()=>{e({ok:!0})}),4e3)}))));return(0,r.jsx)("div",{onClick:()=>{e({a:12345}).then((e=>console.log(e,"run then")),(e=>console.log(e,"run err")))},children:"Example"})},f=()=>{const[e,s]=(0,i.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{onClick:()=>s(!e),children:"change"}),e?(0,r.jsx)(p,{}):(0,r.jsx)(r.Fragment,{children:"sad"})]})},k=[{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:3},{value:"Api",id:"api",level:2},{value:"useSafeState",id:"usesafestate",level:3},{value:"useSafeCb",id:"usesafecb",level:3},{value:"useRtRef",id:"usertref",level:3},{value:"useRtState",id:"usertstate",level:3},{value:"useRtCb",id:"usertcb",level:3},{value:"useBoolState",id:"useboolstate",level:3},{value:"useParamsState",id:"useparamsstate",level:3},{value:"useUpdateEffect",id:"useupdateeffect",level:3},{value:"useIsUnmount",id:"useisunmount",level:3},{value:"useCreate",id:"usecreate",level:3},{value:"useMount",id:"usemount",level:3},{value:"useUnmount",id:"useunmount",level:3},{value:"useThrottle",id:"usethrottle",level:3},{value:"useDebounce",id:"usedebounce",level:3},{value:"useAsync",id:"useasync",level:3},{value:"useTimeout",id:"usetimeout",level:3},{value:"useInterval",id:"useinterval",level:3},{value:"useListener",id:"uselistener",level:3},{value:"useResizeObserver",id:"useresizeobserver",level:3}];function R(e){const s={h2:"h2",h3:"h3",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,d.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.p,{children:"React Hooks \u5e93\uff0c\u5305\u542breact\u57fa\u7840hooks\u7684\u62d3\u5c55\uff0c\u751f\u547d\u5468\u671f\u7684\u6a21\u62df\uff0c\u6d4f\u89c8\u5668api\u7684\u5c01\u88c5\u7b49\u80fd\u529b\uff1b"}),"\n","\n",(0,r.jsx)(s.h3,{id:"\u5b89\u88c5",children:"\u5b89\u88c5"}),"\n",(0,r.jsx)(l.A,{name:"@jelper/handler"}),"\n","\n","\n","\n",(0,r.jsx)(f,{}),"\n","\n",(0,r.jsx)(s.h2,{id:"api",children:"Api"}),"\n",(0,r.jsx)(s.h3,{id:"usesafestate",children:"useSafeState"}),"\n",(0,r.jsx)(s.p,{children:"\u7528\u6cd5\u540c React.useState\uff0c\u4f46\u5728\u7ec4\u4ef6\u5378\u8f7d\u540e\u4e0d\u4f1a\u4fee\u6539\u6570\u636e"}),"\n",(0,r.jsx)(s.h3,{id:"usesafecb",children:"useSafeCb"}),"\n",(0,r.jsx)(s.p,{children:"\u7528\u6cd5\u540c React.useCallback\uff0c\u4f46\u5728\u7ec4\u4ef6\u5378\u8f7d\u540e\u4e0d\u4f1a\u6267\u884c\u56de\u8c03\u51fd\u6570"}),"\n",(0,r.jsx)(s.h3,{id:"usertref",children:"useRtRef"}),"\n",(0,r.jsx)(s.p,{children:"\u7528\u6cd5\u540c React.useRef\uff0c\u4f46\u6bcf\u6b21\u51fd\u6570\u7ec4\u4ef6\u6267\u884c\u65f6 useRtRef\u4f20\u5165\u53c2\u6570\u90fd\u4f1a\u540c\u6b65\u8d4b\u503c ref.current"}),"\n",(0,r.jsx)(s.h3,{id:"usertstate",children:"useRtState"}),"\n",(0,r.jsx)(s.h3,{id:"usertcb",children:"useRtCb"}),"\n",(0,r.jsx)(s.p,{children:"\u7528\u6cd5\u540c React.useCallback\uff0c\u6bcf\u6b21\u51fd\u6570\u7ec4\u4ef6\u6267\u884c\u65f6 useRtCb\u4f20\u5165\u53c2\u6570\u90fd\u4f1a\u540c\u6b65\u7f13\u5b58\u56de\u8c03\u7f13\u5b58\uff0c\u4f46\u4e0d\u4f1a\u66f4\u65b0useRtCb\u8fd4\u56de\u51fd\u6570\uff0c\u4fdd\u8bc1\u56de\u8c03\u51fd\u6570\u4f7f\u7528\u6700\u65b0\u5feb\u7167\u6570\u636e\uff0c\u4f46\u4e0d\u4f1a\u89e6\u53d1dom diff\u4e0d\u4e00\u81f4"}),"\n",(0,r.jsx)(s.h3,{id:"useboolstate",children:"useBoolState"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u65b9\u6cd5"}),(0,r.jsx)(s.th,{children:"\u7c7b\u578b"}),(0,r.jsx)(s.th,{children:"\u8bf4\u660e"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"useBoolState"}),(0,r.jsx)(s.td,{children:"(bool: boolean ) => [Boolean, (bool?: boolean) => void]"}),(0,r.jsx)(s.td,{children:"\u66f4\u65b0\u65f6\u4e0d\u4f20\u503c\uff0c\u53d6\u53cd"})]})})]}),"\n",(0,r.jsx)(s.h3,{id:"useparamsstate",children:"useParamsState"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u65b9\u6cd5"}),(0,r.jsx)(s.th,{children:"\u7c7b\u578b"}),(0,r.jsx)(s.th,{children:"\u8bf4\u660e"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"useParamsState"}),(0,r.jsx)(s.td,{children:"<T>(data: T) => [T, (data: Partial<T>) => void), (data: T) => void]"}),(0,r.jsx)(s.td,{children:"-"})]})})]}),"\n",(0,r.jsx)(s.h3,{id:"useupdateeffect",children:"useUpdateEffect"}),"\n",(0,r.jsx)(s.p,{children:"\u7528\u6cd5\u540c React.useEffect\uff0c\u4f46\u9996\u6b21\u4e0d\u4f1a\u6267\u884c\uff0c\u53ea\u6709\u4f9d\u8d56\u66f4\u65b0\u624d\u4f1a\u6267\u884c"}),"\n",(0,r.jsx)(s.h3,{id:"useisunmount",children:"useIsUnmount"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u65b9\u6cd5"}),(0,r.jsx)(s.th,{children:"\u7c7b\u578b"}),(0,r.jsx)(s.th,{children:"\u8bf4\u660e"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"useIsUnmount"}),(0,r.jsx)(s.td,{children:"() => () => boolean"}),(0,r.jsx)(s.td,{children:"\u83b7\u53d6\u7ec4\u4ef6\u662f\u5426\u5378\u8f7d\u72b6\u6001"})]})})]}),"\n",(0,r.jsx)(s.h3,{id:"usecreate",children:"useCreate"}),"\n",(0,r.jsx)(s.p,{children:"\u751f\u547d\u5468\u671f\u94a9\u5b50"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u65b9\u6cd5"}),(0,r.jsx)(s.th,{children:"\u7c7b\u578b"}),(0,r.jsx)(s.th,{children:"\u8bf4\u660e"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"useCreate"}),(0,r.jsx)(s.td,{children:"(fn: () => void) => void"}),(0,r.jsx)(s.td,{children:"\u53ea\u540c\u6b65\u6267\u884c\u4e00\u6b21"})]})})]}),"\n",(0,r.jsx)(s.h3,{id:"usemount",children:"useMount"}),"\n",(0,r.jsx)(s.p,{children:"\u751f\u547d\u5468\u671f\u94a9\u5b50"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u65b9\u6cd5"}),(0,r.jsx)(s.th,{children:"\u7c7b\u578b"}),(0,r.jsx)(s.th,{children:"\u8bf4\u660e"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"useMount"}),(0,r.jsx)(s.td,{children:"(fn: () => void) => void"}),(0,r.jsx)(s.td,{children:"\u51fd\u6570\u4f7f\u7528\u6700\u65b0\u5feb\u7167\u6570\u636e"})]})})]}),"\n",(0,r.jsx)(s.h3,{id:"useunmount",children:"useUnmount"}),"\n",(0,r.jsx)(s.p,{children:"\u751f\u547d\u5468\u671f\u94a9\u5b50"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u65b9\u6cd5"}),(0,r.jsx)(s.th,{children:"\u7c7b\u578b"}),(0,r.jsx)(s.th,{children:"\u8bf4\u660e"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"useUnmount"}),(0,r.jsx)(s.td,{children:"(fn: () => void) => void"}),(0,r.jsx)(s.td,{children:"\u51fd\u6570\u4f7f\u7528\u6700\u65b0\u5feb\u7167\u6570\u636e"})]})})]}),"\n",(0,r.jsx)(s.h3,{id:"usethrottle",children:"useThrottle"}),"\n",(0,r.jsx)(s.p,{children:"lodash throttle"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u65b9\u6cd5"}),(0,r.jsx)(s.th,{children:"\u7c7b\u578b"}),(0,r.jsx)(s.th,{children:"\u8bf4\u660e"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"useThrottle"}),(0,r.jsx)(s.td,{children:"<T>(cb: T, wait?: number, opts?: ThrottleSettings) => T"}),(0,r.jsx)(s.td,{children:"-"})]})})]}),"\n",(0,r.jsx)(s.h3,{id:"usedebounce",children:"useDebounce"}),"\n",(0,r.jsx)(s.p,{children:"lodash debounce\u5c01\u88c5hooks"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u65b9\u6cd5"}),(0,r.jsx)(s.th,{children:"\u7c7b\u578b"}),(0,r.jsx)(s.th,{children:"\u8bf4\u660e"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"useDebounce"}),(0,r.jsx)(s.td,{children:"<T>(cb: T, wait?: number, opts?: DebounceSettings) => T"}),(0,r.jsx)(s.td,{children:"-"})]})})]}),"\n",(0,r.jsx)(s.h3,{id:"useasync",children:"useAsync"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u65b9\u6cd5"}),(0,r.jsx)(s.th,{children:"\u7c7b\u578b"}),(0,r.jsx)(s.th,{children:"\u8bf4\u660e"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"useAsync"}),(0,r.jsx)(s.td,{children:"(cb: Function, opts: { immediate: Boolean; catchParam: Boolean }) => { loading: Boolean, error: Error, data: any, run: Function }"}),(0,r.jsx)(s.td,{children:"-"})]})})]}),"\n",(0,r.jsx)(s.h3,{id:"usetimeout",children:"useTimeout"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u65b9\u6cd5"}),(0,r.jsx)(s.th,{children:"\u7c7b\u578b"}),(0,r.jsx)(s.th,{children:"\u8bf4\u660e"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"useTimeout"}),(0,r.jsx)(s.td,{children:"(cb: Function, delay: number) => Function"}),(0,r.jsx)(s.td,{children:"\u8fd4\u56de\u6e05\u9664\u51fd\u6570\uff0c\u7ec4\u4ef6\u9500\u6bc1\u81ea\u52a8\u6e05\u9664"})]})})]}),"\n",(0,r.jsx)(s.h3,{id:"useinterval",children:"useInterval"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u65b9\u6cd5"}),(0,r.jsx)(s.th,{children:"\u7c7b\u578b"}),(0,r.jsx)(s.th,{children:"\u8bf4\u660e"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"useInterval"}),(0,r.jsx)(s.td,{children:"(cb: Function, delay: number) => Function"}),(0,r.jsx)(s.td,{children:"\u8fd4\u56de\u6e05\u9664\u51fd\u6570\uff0c\u7ec4\u4ef6\u9500\u6bc1\u81ea\u52a8\u6e05\u9664"})]})})]}),"\n",(0,r.jsx)(s.h3,{id:"uselistener",children:"useListener"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u65b9\u6cd5"}),(0,r.jsx)(s.th,{children:"\u7c7b\u578b"}),(0,r.jsx)(s.th,{children:"\u8bf4\u660e"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"useInterval"}),(0,r.jsx)(s.td,{children:"\u540c addEventListener"}),(0,r.jsx)(s.td,{children:"\u8fd4\u56de\u6e05\u9664\u51fd\u6570\uff0c\u7ec4\u4ef6\u9500\u6bc1\u81ea\u52a8\u6e05\u9664"})]})})]}),"\n",(0,r.jsx)(s.h3,{id:"useresizeobserver",children:"useResizeObserver"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"\u65b9\u6cd5"}),(0,r.jsx)(s.th,{children:"\u7c7b\u578b"}),(0,r.jsx)(s.th,{children:"\u8bf4\u660e"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"useResizeObserver"}),(0,r.jsx)(s.td,{children:"(dom: HTMLElement, cb: (dom: ResizeObserverEntry) => void) => [ob: () => void, unOb: () => void]"}),(0,r.jsx)(s.td,{children:"\u8fd4\u56de\u76d1\u542c\u548c\u6e05\u9664\u51fd\u6570\uff0c\u7ec4\u4ef6\u9500\u6bc1\u81ea\u52a8\u6e05\u9664"})]})})]})]})}function y(e={}){const{wrapper:s}={...(0,d.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(R,{...e})}):R(e)}}}]);